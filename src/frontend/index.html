<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

   
   <!-- libraries -->
   <!-- TODO: investigate using require.js or some other js dependency manager -->
   <script type="text/javascript" src="/assets/libs/jquery.js"></script>
   <script type="text/javascript" src="/assets/libs/json2.js"></script>
   
   <script type="text/javascript" src="/assets/libs/ol.js"></script> <!-- curious: ol3 generates a mysterious iframe with an empty document inside -->
   <link rel="stylesheet" href="/assets/libs/ol.css" type="text/css">
   <script type="text/javascript" src="/assets/libs/d3.v3.js" charset="utf-8"></script>
   <script type="text/javascript" src="/assets/libs/nv.d3.js"></script>
   <link href="/assets/libs/nv.d3.css" rel="stylesheet" type="text/css">

   <!-- project code -->
   <link rel="stylesheet" type="text/css" href="css/style.css" />
   
   <!-- networking -->
   <!-- <script type="text/javascript" src="wamp.js"></script> -->
   
   <!-- ol3 --> 
   <script type="text/javascript" src="map.js"></script>
  
   <!-- d3 -->
   <script type="text/javascript" src="graph.js"></script>  

   <title>Model Explorer -- Agriculture Simulation</title>

</head>
<body>

  <div id="layout">
    <!--<h2>Model Explorer -- Agriculture Simulation</h2>-->
    <div id="view">
      <div id="map"></div><!-- hide whitespace from parser
      --><div id="graph"><h2>&lt;GRAPH&gt;</h2></div>
    </div>
    <div id="controls">
     <div class="shrinkwrap">
     
      <!-- this is wired up via jQuery to start and stop the simulation -->
      <!-- TODO: DataBind this button to the model's connection status:
         - grey when "disconnected", otherwise
         - "Play" when the view is paused
         - "Pause" when the view is playing; also, in this state:
              the backend model runner *should* be pumping out new data
                (but we mustn't count on that)    
      -->
      <button id="run">Play</button> 
      
      <div id="time">
        <!-- TODO: make this range slider have finer resolution (but make sure the <output> is legible over accurate) -->
        <input id="time_slider" type="range" min="-Infinity" max="Infinity" step="0.00001"  width="100%" />
        <label for="time_output">Timestep:</label> <output id="time_output"></output>
        <script>
        //$.on("loaded", function() { alert("no") } )
        $(document).ready(function() {
          var controls_form = $("#time");
          var time_output = controls_form.find("#time_output")[0];
          var time_slider = controls_form.find("#time_slider")[0];
          console.log(time_output)
          // Keep the 
          // TODO: pull this out of the HTML
          function _synctime() { time_output.value = Math.floor(time_slider.value); }
          _synctime();
          controls_form.on("input",_synctime); //'oninput' doesn't have a jQuery shorthand yet
        })
        </script>
      </div>
      
      <label for="connected">Status:</label>
      <meter id="connected" min="0" max="1" value="0"></meter>
     </div>
    </div>  
  </div>
</body>
</html>
